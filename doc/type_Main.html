<html><head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Main" rel="Chapter" href="Main.html"><title>Main</title>
</head>
<body>
<code class="code"><span class="keyword">sig</span><br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;_DEBUG_&nbsp;:&nbsp;bool<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;message&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;unit<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;row_sheet&nbsp;:&nbsp;string<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">MyList</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;first&nbsp;:&nbsp;int&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;safe_zipper&nbsp;:&nbsp;<span class="keywordsign">'</span>t&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;zipper&nbsp;=&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;zip_with&nbsp;:&nbsp;<span class="keywordsign">'</span>t&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyList</span>.zipper&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;list&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;foreach&nbsp;:&nbsp;<span class="keywordsign">'</span>x&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;(<span class="keywordsign">'</span>x&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>y&nbsp;list)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>y&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">MyString</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;line&nbsp;=&nbsp;char&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;column&nbsp;=&nbsp;char&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;fold&nbsp;:&nbsp;(<span class="keywordsign">'</span>o&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;char&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>o)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>o&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;to_char_list&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;char&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;to_line_list&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyString</span>.line&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;transpose&nbsp;:&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyString</span>.line&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyString</span>.column&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;char_list_to_string&nbsp;:&nbsp;char&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;test_transpose&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;test&nbsp;:&nbsp;unit&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;unit<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;pattern&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">ANY</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">KEY</span>&nbsp;<span class="keyword">of</span>&nbsp;<span class="keywordsign">'</span>a<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">BUT</span>&nbsp;<span class="keyword">of</span>&nbsp;<span class="keywordsign">'</span>a<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">IN</span>&nbsp;<span class="keyword">of</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">OUT</span>&nbsp;<span class="keyword">of</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Pattern</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;t&nbsp;=&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="constructor">Main</span>.pattern<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;exactly&nbsp;:&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="constructor">Main</span>.pattern&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;bool<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;matches&nbsp;:&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="constructor">Main</span>.pattern&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;bool<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;pretty&nbsp;:&nbsp;(<span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="constructor">Main</span>.pattern&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;print&nbsp;:&nbsp;(<span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;string)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a&nbsp;<span class="constructor">Main</span>.pattern&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;unit<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;clock&nbsp;=&nbsp;float<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Clock</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;date&nbsp;=&nbsp;float<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;duration&nbsp;=&nbsp;float<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initial&nbsp;:&nbsp;<span class="constructor">Main</span>.<span class="constructor">Clock</span>.date<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;shift_by&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.<span class="constructor">Clock</span>.duration&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.<span class="constructor">Clock</span>.date&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.<span class="constructor">Clock</span>.date<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;sound&nbsp;=&nbsp;string<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;timed_sound&nbsp;=&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.sound<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;<span class="keywordsign">'</span>t&nbsp;sequence&nbsp;=&nbsp;<span class="keywordsign">'</span>t&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;soundtrack&nbsp;=&nbsp;<span class="constructor">Main</span>.timed_sound&nbsp;<span class="constructor">Main</span>.sequence<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;sic&nbsp;=&nbsp;<span class="constructor">Nil</span>&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Sic</span>&nbsp;<span class="keyword">of</span>&nbsp;(<span class="constructor">Main</span>.clock&nbsp;*&nbsp;string&nbsp;list)<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Sound</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;finalize&nbsp;:&nbsp;<span class="constructor">Main</span>.sic&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.soundtrack<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;extend_with&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.sic&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.sic<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;data&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;clock&nbsp;:&nbsp;<span class="constructor">Main</span>.clock;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sound&nbsp;:&nbsp;<span class="constructor">Main</span>.sic;<br>
&nbsp;&nbsp;&nbsp;&nbsp;soundtrack&nbsp;:&nbsp;<span class="constructor">Main</span>.soundtrack;<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Data</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initial&nbsp;:&nbsp;<span class="constructor">Main</span>.data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;finalize&nbsp;:&nbsp;<span class="constructor">Main</span>.data&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.data&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_soundtrack&nbsp;:&nbsp;<span class="constructor">Main</span>.data&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.soundtrack<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;update_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.clock&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.data&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.data<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;symbol&nbsp;=&nbsp;string<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;action&nbsp;=&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.data&nbsp;*&nbsp;<span class="constructor">Main</span>.symbol&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.data<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Action</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;increase_clock_by&nbsp;:&nbsp;<span class="constructor">Main</span>.<span class="constructor">Clock</span>.duration&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;extend_sound_with&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;finalize_sound&nbsp;:&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;make_sound&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;update_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;apply_sequence_of&nbsp;:&nbsp;<span class="constructor">Main</span>.action&nbsp;<span class="constructor">Main</span>.sequence&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.action<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;epsilon&nbsp;:&nbsp;string<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;inputs&nbsp;=&nbsp;<span class="constructor">Main</span>.symbol&nbsp;<span class="constructor">Main</span>.sequence<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;node&nbsp;=&nbsp;int<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;transition&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.node&nbsp;*&nbsp;<span class="constructor">Main</span>.label&nbsp;*&nbsp;<span class="constructor">Main</span>.action&nbsp;<span class="constructor">Main</span>.sequence&nbsp;*&nbsp;<span class="constructor">Main</span>.node<br>
&nbsp;&nbsp;<span class="keyword">and</span>&nbsp;label&nbsp;=&nbsp;<span class="constructor">Main</span>.symbol&nbsp;<span class="constructor">Main</span>.pattern<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;automaton&nbsp;=&nbsp;{&nbsp;name&nbsp;:&nbsp;string;&nbsp;transitions&nbsp;:&nbsp;<span class="constructor">Main</span>.transition&nbsp;list;&nbsp;}<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Automaton</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initial_node&nbsp;:&nbsp;<span class="constructor">Main</span>.node<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;make&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.transition&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.automaton<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_transition_on&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.symbol&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.automaton&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.node&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.transition&nbsp;option<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;install&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;(string&nbsp;*&nbsp;<span class="constructor">Main</span>.automaton)&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;named&nbsp;:&nbsp;string&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;(string&nbsp;*&nbsp;<span class="constructor">Main</span>.automaton)&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.automaton<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;adef&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;digit&nbsp;:&nbsp;string&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;atempo&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;adrum&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;_AUTOMATA_&nbsp;:&nbsp;(string&nbsp;*&nbsp;<span class="constructor">Main</span>.automaton)&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;state&nbsp;=&nbsp;{&nbsp;node&nbsp;:&nbsp;<span class="constructor">Main</span>.node;&nbsp;data&nbsp;:&nbsp;<span class="constructor">Main</span>.data;&nbsp;}<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">State</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initial&nbsp;:&nbsp;<span class="constructor">Main</span>.state<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.state&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_soundtrack&nbsp;:&nbsp;<span class="constructor">Main</span>.state&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.soundtrack<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;update_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.clock&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.state&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.state<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;update&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.state&nbsp;<span class="keywordsign">-&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.symbol&nbsp;*&nbsp;<span class="constructor">Main</span>.action&nbsp;<span class="constructor">Main</span>.sequence&nbsp;*&nbsp;<span class="constructor">Main</span>.node&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.state<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;process&nbsp;=&nbsp;{&nbsp;automaton&nbsp;:&nbsp;string;&nbsp;state&nbsp;:&nbsp;<span class="constructor">Main</span>.state;&nbsp;}<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Process</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.process&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;get_soundtrack&nbsp;:&nbsp;<span class="constructor">Main</span>.process&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.soundtrack<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;update_clock&nbsp;:&nbsp;<span class="constructor">Main</span>.clock&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.process&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.process<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initialize&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.process<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;one_step_on&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.symbol&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.process&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.process<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;one_step_each_process&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.symbol&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.process&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.clock&nbsp;*&nbsp;<span class="constructor">Main</span>.process&nbsp;list<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;frame&nbsp;=&nbsp;char&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;sheet&nbsp;=&nbsp;<span class="constructor">Main</span>.frame&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;run&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;clock&nbsp;:&nbsp;<span class="constructor">Main</span>.clock;<br>
&nbsp;&nbsp;&nbsp;&nbsp;processus&nbsp;:&nbsp;<span class="constructor">Main</span>.process&nbsp;list;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sheet&nbsp;:&nbsp;<span class="constructor">Main</span>.sheet;<br>
&nbsp;&nbsp;&nbsp;&nbsp;soundtracks&nbsp;:&nbsp;<span class="constructor">Main</span>.soundtrack&nbsp;list;<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">SheetParser</span>&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">sig</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initialize&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.sheet&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.run<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;one_step&nbsp;:&nbsp;<span class="constructor">Main</span>.run&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.run<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;_RUN&nbsp;:&nbsp;<span class="constructor">Main</span>.run&nbsp;<span class="constructor">Pervasives</span>.ref<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;initialize&nbsp;:&nbsp;<span class="constructor">Main</span>.automaton&nbsp;list&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.sheet&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.run<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;one_step&nbsp;:&nbsp;unit&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.run<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;sheetparser&nbsp;:&nbsp;<span class="constructor">Main</span>.sheet&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Main</span>.run<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;full_sheet&nbsp;:&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyString</span>.column&nbsp;list<br>
&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;sheet&nbsp;:&nbsp;<span class="constructor">Main</span>.<span class="constructor">MyString</span>.column&nbsp;list<br>
<span class="keyword">end</span></code></body></html>